apiVersion: v1
kind: Pod
metadata:
  name: hub-detect-ws
  namespace: integration-test
  labels:
    app: hub-detect-ws
spec:
  containers:
  - name: hub-detect-ws
    image: blackducksoftware/hub-detect-ws:@VERSION@
    volumeMounts:
    - name: detect-target-dir
      mountPath: /opt/blackduck/hub-detect-ws/target
    ports:
    - containerPort: 8083
      hostPort: 8083
    livenessProbe:
      httpGet:
        path: /health
        port: 8083
      initialDelaySeconds: 120
      periodSeconds: 30
      timeoutSeconds: 10
  volumes:
  - name: detect-target-dir
    hostPath:
      path: @CURRENT_DIR@/build/test/target
      type: Directory
